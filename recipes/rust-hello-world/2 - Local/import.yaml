project:
  name: rust-hello-world-local

services:
  # App container for testing the production build pipeline from a local machine.
  # The developer runs the app locally (cargo run / cargo watch), uses 'zcli vpn up'
  # to connect their machine to this Zerops project network, and accesses the 'db'
  # service by its hostname as if running inside the project. Deploy to this container
  # via 'zcli push' to validate the production build before promoting to a live environment.
  - hostname: app
    type: rust@stable
    zeropsSetup: prod
    buildFromGit: https://github.com/zerops-recipe-apps/rust-hello-world-app
    enableSubdomainAccess: true

  # Deploy PostgreSQL database for app data.
  # Priority 10 ensures the database starts before the app container â€” without this,
  # the app would fail with "connection refused" during deployment.
  # This startup ordering pattern applies to all data services in this project.
  - hostname: db
    type: postgresql@17
    mode: NON_HA
    priority: 10
