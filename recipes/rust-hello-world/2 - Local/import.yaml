project:
  name: rust-hello-world-local

services:
  # App service used during local development â€” runs the production build
  # pipeline so local changes can be pushed and validated against the real
  # infrastructure before deploying to staging or production.
  - hostname: app
    type: rust@stable
    zeropsSetup: prod
    buildFromGit: https://github.com/zerops-recipe-apps/rust-hello-world-app
    enableSubdomainAccess: true
    minContainers: 1
    maxContainers: 1
    resources:
      minRam: 0.125
      minFreeRamGB: 0.05

  # Deploy PostgreSQL database for app data.
  # Priority 10 ensures the database starts before app containers, preventing
  # connection errors during deployment.
  # In local development the database is accessed via 'zcli vpn up', which
  # creates a secure tunnel from your local machine into the Zerops network.
  # The DB_HOST env variable on your local app should then point to 'db' (the
  # service hostname) rather than localhost.
  - hostname: db
    type: postgresql@17
    mode: NON_HA
    priority: 10
